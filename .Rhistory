factor(studentHeights$`年齡層` , names(startages))
studentHeights$`年齡層`
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr);
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr);
jsonlite::fromJSON("https://www.dropbox.com/s/bp0w8tjgrhi79x7/sameMajorDifferentWritings.json?dl=1") -> differentMajors
str_replace(differentMajors,realEstateRegex,"不動系")
differentMajors
realEstateRegex <- "(?<=不動)[:graph:](?=系)"
str_replace(differentMajors,realEstateRegex,"不動系")
jsonlite::fromJSON("https://www.dropbox.com/s/bp0w8tjgrhi79x7/sameMajorDifferentWritings.json?dl=1") -> differentMajors
differentMajors
realEstateRegex <- "(?<=不動)[:graph:](?=系)"
str_replace(differentMajors,realEstateRegex,"不動系")
jsonlite::fromJSON("https://www.dropbox.com/s/bp0w8tjgrhi79x7/sameMajorDifferentWritings.json?dl=1") -> differentMajors
realEstateRegex <- "(?<=不動)[:graph:](?=系)"
# realEstateRegex
str_replace(differentMajors,realEstateRegex,"不動系")
realEstateRegex <- "(?<=不動)(?=系)"
str_replace(differentMajors,realEstateRegex,"不動系")
realEstateRegex <- "(?<=不動)[:graph:]+(?=系)"
# realEstateRegex
str_replace(differentMajors,realEstateRegex,"不動系")
jsonlite::fromJSON("https://www.dropbox.com/s/bp0w8tjgrhi79x7/sameMajorDifferentWritings.json?dl=1") -> differentMajors
realEstateRegex <- "(?<=不動)+(?=系)"
# realEstateRegex
str_replace(differentMajors,realEstateRegex,"不動系")
jsonlite::fromJSON("https://www.dropbox.com/s/bp0w8tjgrhi79x7/sameMajorDifferentWritings.json?dl=1") -> differentMajors
realEstateRegex <- "(?<=不動)(?=系)"
# realEstateRegex
str_replace(differentMajors,realEstateRegex,"不動系")
class(realEstateRegex)
levels(differentMajors)
levels(factor(differentMajors)
levels(factor(differentMajors)
levels(factor(differentMajors))
realEstateRegex <- "(不動系|不動產城鄉學系|不動產與城鄉環境學系)"
str_replace(differentMajors,realEstateRegex,"不動系")
levels(factor(differentMajors))
realEstateRegex <- "(不動系|不動產城鄉學系|不動產與城鄉環境學系)"
str_replace(differentMajors,realEstateRegex,"不動系")
levels(factor(differentMajors))
str_replace(differentMajors,realEstateRegex,"不動系")
realEstateRegex <- "(不動系|不動產城鄉學系|不動產與城鄉環境學系)"
# realEstateRegex
str_replace(differentMajors,realEstateRegex,"不動系")
differentMajors <- factor(differentMajors)
levels(differentMajors)
currentLevels <- levels(differentMajors)
currentLevels
class(currentLevels)
bSchoolRegex <- "(休閒與運動管理學系|休運系|金融系|金融與合作經營學系|金融與合作學系)"
# bSchoolRegex
str_replace(currentLevels,bSchoolRegex,"商學院")
levels(differentMajors)
levels(differentMajors)
levels(differentMajors) <-
str_replace(differentMajors , "(不動系|不動產城鄉學系|不動產與城鄉環境學系)" , "不動系")
levels(differentMajors)
levels(differentMajors) <-
str_replace(differentMajors , "(公共行政系|公共行政暨政策學系|公行系)" , "公行系")
levels(differentMajors) <-
str_replace(differentMajors , "(社會學系|社會工作學系)" , "社會系")
levels(differentMajors)
jsonlite::fromJSON("https://www.dropbox.com/s/bp0w8tjgrhi79x7/sameMajorDifferentWritings.json?dl=1") -> differentMajors
realEstateRegex <- "(不動系|不動產城鄉學系|不動產與城鄉環境學系)"
realEstateRegex
str_replace(differentMajors,realEstateRegex,"不動系")
differentMajors <- factor(differentMajors)
currentLevels <- levels(differentMajors)
currentLevels
differentMajors <- factor(differentMajors)
currentLevels <- levels(differentMajors)
currentLevels
bSchoolRegex <- "(休閒與運動管理學系|休運系|金融系|金融與合作經營學系|金融與合作學系)"
bSchoolRegex
str_replace(currentLevels,bSchoolRegex,"商學院")
str_replace(currentLevels,bSchoolRegex,"商學院")
levels(differentMajors)
levels(differentMajors)
levels(differentMajors) <-
str_replace(differentMajors , "(不動系|不動產城鄉學系|不動產與城鄉環境學系)" , "不動系")
levels(differentMajors)
levels(differentMajors)
levels(differentMajors) <-
str_replace(differentMajors , "(不動系|不動產城鄉學系|不動產與城鄉環境學系)" , "不動系")
levels(differentMajors) <-
str_replace(differentMajors , "(公共行政系|公共行政暨政策學系|公行系)" , "公行系")
levels(differentMajors) <-
str_replace(differentMajors , "(社會學系|社會系)" , "社會系")
# differentMajors
levels(differentMajors)
levels(differentMajors)
jsonlite::fromJSON("https://www.dropbox.com/s/bp0w8tjgrhi79x7/sameMajorDifferentWritings.json?dl=1") -> differentMajors
realEstateRegex <- "(不動系|不動產城鄉學系|不動產與城鄉環境學系)"
realEstateRegex
str_replace(differentMajors,realEstateRegex,"不動系")
differentMajors <- factor(differentMajors)
currentLevels <- levels(differentMajors)
currentLevels
bSchoolRegex <- "(休閒與運動管理學系|休運系|金融系|金融與合作經營學系|金融與合作學系)"
bSchoolRegex
str_replace(currentLevels,bSchoolRegex,"商學院")
str_replace(currentLevels,bSchoolRegex,"商學院")
levels(differentMajors)
levels(differentMajors) <-
str_replace(differentMajors , "(不動系|不動產城鄉學系|不動產與城鄉環境學系)" , "不動系")
levels(differentMajors)
levels(differentMajors) <-
str_replace(differentMajors , "(社會學系|社會系)" , "社會系")
levels(differentMajors)
levels(differentMajors) <-
str_replace(differentMajors , "(休閒與運動管理學系|休運系)" , "休運系")
levels(differentMajors)
realEstateRegex <- "(不動系|不動產城鄉學系|不動產與城鄉環境學系)"
realEstateRegex
str_replace(differentMajors,realEstateRegex,"不動系")
differentMajors <- factor(differentMajors)
currentLevels <- levels(differentMajors)
currentLevels
bSchoolRegex <- "(休閒與運動管理學系|休運系|金融系|金融與合作經營學系|金融與合作學系)"
bSchoolRegex
str_replace(currentLevels,bSchoolRegex,"商學院")
str_replace(currentLevels,bSchoolRegex,"商學院")
levels(differentMajors) <-
str_replace(differentMajors , "(不動系|不動產城鄉學系|不動產與城鄉環境學系)" , "不動系")
levels(differentMajors) <-
str_replace(differentMajors , "(公共行政系|公共行政暨政策學系|公行系)" , "公行系")
levels(differentMajors) <-
str_replace(differentMajors , "(休閒與運動管理學系|休運系)" , "休運系")
levels(differentMajors) <-
str_replace(differentMajors , "(社工系|社會工作學系)" , "社工系")
levels(differentMajors) <-
str_replace(differentMajors , "(社會學系|社會系)" , "社會系")
levels(differentMajors) <-
str_replace(differentMajors , "(金融系|金融與合作經營學系|金融與合作學系)" , "金融系")
levels(differentMajors) <-
str_replace(differentMajors , "(經濟系|經濟學系)" , "經濟系")
differentMajors
jsonlite::fromJSON("https://www.dropbox.com/s/bp0w8tjgrhi79x7/sameMajorDifferentWritings.json?dl=1") -> differentMajors
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr);
realEstateRegex <- "(不動系|不動產城鄉學系|不動產與城鄉環境學系)"
realEstateRegex
str_replace(differentMajors,realEstateRegex,"不動系")
jsonlite::fromJSON("https://www.dropbox.com/s/bp0w8tjgrhi79x7/sameMajorDifferentWritings.json?dl=1") -> differentMajors
realEstateRegex <- "(不動系|不動產城鄉學系|不動產與城鄉環境學系)"
realEstateRegex
str_replace(differentMajors,realEstateRegex,"不動系")
differentMajors <- factor(differentMajors)
currentLevels <- levels(differentMajors)
currentLevels
differentMajors
bSchoolRegex <- "(休閒與運動管理學系|休運系|金融系|金融與合作經營學系|金融與合作學系)"
bSchoolRegex
str_replace(currentLevels,bSchoolRegex,"商學院")
str_replace(currentLevels,bSchoolRegex,"商學院")
levels(differentMajors) <-
str_replace(differentMajors , "(不動系|不動產城鄉學系|不動產與城鄉環境學系)" , "不動系")
levels(differentMajors) <-
str_replace(differentMajors , "(公共行政系|公共行政暨政策學系|公行系)" , "公行系")
levels(differentMajors) <-
str_replace(differentMajors , "(休閒與運動管理學系|休運系)" , "休運系")
levels(differentMajors) <-
str_replace(differentMajors , "(社工系|社會工作學系)" , "社工系")
levels(differentMajors) <-
str_replace(differentMajors , "(社會學系|社會系)" , "社會系")
levels(differentMajors) <-
str_replace(differentMajors , "(金融系|金融與合作經營學系|金融與合作學系)" , "金融系")
levels(differentMajors) <-
str_replace(differentMajors , "(經濟系|經濟學系)" , "經濟系")
differentMajors
jsonlite::fromJSON("https://www.dropbox.com/s/bp0w8tjgrhi79x7/sameMajorDifferentWritings.json?dl=1") -> differentMajors
realEstateRegex <- "(不動系|不動產城鄉學系|不動產與城鄉環境學系)"
realEstateRegex
str_replace(differentMajors,realEstateRegex,"不動系")
differentMajors <- factor(differentMajors)
currentLevels <- levels(differentMajors)
currentLevels
bSchoolRegex <- "(休閒與運動管理學系|休運系|金融系|金融與合作經營學系|金融與合作學系)"
bSchoolRegex
str_replace(currentLevels,bSchoolRegex,"商學院")
differentMajors
levels(differentMajors) <-
str_replace(differentMajors , "(不動系|不動產城鄉學系|不動產與城鄉環境學系)" , "不動系")
differentMajors
levels(differentMajors) <-
str_replace(differentMajors , "(公共行政系|公共行政暨政策學系|公行系)" , "公行系")
differentMajors
levels(differentMajors) <-
str_replace(differentMajors , "(休閒與運動管理學系|休運系)" , "休運系")
differentMajors
levels(differentMajors) <-
str_replace(differentMajors , "(社工系|社會工作學系)" , "社工系")
levels(differentMajors) <-
str_replace(differentMajors , "(金融系|金融與合作經營學系|金融與合作學系)" , "金融系")
levels(differentMajors) <-
str_replace(differentMajors , "(經濟系|經濟學系)" , "經濟系")
jsonlite::fromJSON("https://www.dropbox.com/s/bp0w8tjgrhi79x7/sameMajorDifferentWritings.json?dl=1") -> differentMajors
realEstateRegex <- "(不動系|不動產城鄉學系|不動產與城鄉環境學系)"
realEstateRegex
str_replace(differentMajors,realEstateRegex,"不動系")
differentMajors <- factor(differentMajors)
currentLevels <- levels(differentMajors)
currentLevels
bSchoolRegex <- "(休閒與運動管理學系|休運系|金融系|金融與合作經營學系|金融與合作學系)"
bSchoolRegex
str_replace(currentLevels,bSchoolRegex,"商學院")
differentMajors
levels(differentMajors)
levels(differentMajors)[c(1,2,3)] <- "不動系"
levels(differentMajors)[c(4,5,6)] <- "公行系"
levels(differentMajors)[c(7,8)] <- "休運系"
levels(differentMajors)[c(9,10)] <- "社工系"
levels(differentMajors)[c(11,12)] <- "社會系"
levels(differentMajors)[c(13,14,15)] <- "金融系"
levels(differentMajors)[c(16,17)] <- "經濟系"
differentMajors
differentMajors
jsonlite::fromJSON("https://www.dropbox.com/s/bp0w8tjgrhi79x7/sameMajorDifferentWritings.json?dl=1") -> differentMajors
differentMajors <- factor(differentMajors)
currentLevels <- levels(differentMajors)
currentLevels
levels(differentMajors)[c(1,2,3)] <- "不動系"
differentMajors
levels(differdifferentMajors)
levels(differentMajors)
levels(differentMajors)[c(3,4,5)] <- "公行系"
levels(differentMajors)
jsonlite::fromJSON("https://www.dropbox.com/s/bp0w8tjgrhi79x7/sameMajorDifferentWritings.json?dl=1") -> differentMajors
differentMajors <- factor(differentMajors)
currentLevels <- levels(differentMajors)
currentLevels
levels(differentMajors)
"
levels(differentMajors)[c(1,2,3)] <- "不動系"
levels(differentMajors)
levels(differentMajors)[c(1,2,3)] <- "不動系"
levels(differentMajors)
levels(differentMajors)[c(2,3,4)] <- "公行系"
levels(differentMajors)
levels(differentMajors)[c(3,4)] <- "休運系"
levels(differentMajors)
levels(differentMajors)[c(4,5)] <- "社工系"
levels(differentMajors)
levels(differentMajors)[c(5,6)] <- "社會系"
levels(differentMajors)
levels(differentMajors)[c(6,7,8)] <- "金融系"
levels(differentMajors)
levels(differentMajors)[c(7,8)] <- "經濟系"
levels(differentMajors)
differentMajors
differentMajors
levels(differentMajors)
levels(differentMajors) <- str_replace(differentMajors , "休運系|金融系" , "商學院")
levels(differentMajors)
levels(differentMajors) <- str_replace(differentMajors , "經濟系|社會系|社工系" , "社科院 ")
levels(differentMajors)
levels(differentMajors) <- str_replace(differentMajors , "公行系|不動系" , "公共事務學院")
levels(differentMajors)
realEstateRegex <- "(不動系|不動產城鄉學系|不動產與城鄉環境學系)"
realEstateRegex
differentMajors <- factor(differentMajors)
currentLevels <- levels(differentMajors)
currentLevels
levels(differentMajors)
levels(differentMajors)[c(1,2,3)] <- "不動系"
levels(differentMajors)[c(2,3,4)] <- "公行系"
levels(differentMajors)[c(3,4)] <- "休運系"
levels(differentMajors)[c(4,5)] <- "社工系"
levels(differentMajors)[c(5,6)] <- "社會系"
levels(differentMajors)[c(6,7,8)] <- "金融系"
levels(differentMajors)[c(7,8)] <- "經濟系"
differentMajors
str_replace(differentMajors , "休運系|金融系" , "商學院")
str_replace(differentMajors , "經濟系|社會系|社工系" , "社科院 ")
str_replace(differentMajors , "公行系|不動系" , "公共事務學院")
# school
str_replace(differentMajors , "休運系|金融系" , "商學院")
differentMajors
jsonlite::fromJSON("https://www.dropbox.com/s/bp0w8tjgrhi79x7/sameMajorDifferentWritings.json?dl=1") -> differentMajors
differentMajors <- factor(differentMajors)
currentLevels <- levels(differentMajors)
currentLevels
levels(differentMajors)
levels(differentMajors)[c(1,2,3)] <- "不動系"
levels(differentMajors)[c(2,3,4)] <- "公行系"
levels(differentMajors)[c(3,4)] <- "休運系"
levels(differentMajors)[c(4,5)] <- "社工系"
levels(differentMajors)[c(5,6)] <- "社會系"
levels(differentMajors)[c(6,7,8)] <- "金融系"
levels(differentMajors)[c(7,8)] <- "經濟系"
differentMajors
school <- (str_replace(differentMajors , "休運系|金融系" , "商學院"),
str_replace(differentMajors , "經濟系|社會系|社工系" , "社科院 "),
str_replace(differentMajors , "公行系|不動系" , "公共事務學院"))
# school
str_replace(differentMajors , "休運系|金融系" , "商學院")
str_replace(differentMajors , "經濟系|社會系|社工系" , "社科院 ")
str_replace(differentMajors , "公行系|不動系" , "公共事務學院")
differentMajors <- str_replace(differentMajors , "休運系|金融系" , "商學院")
differentMajors <- str_replace(differentMajors , "經濟系|社會系|社工系" , "社科院 ")
differentMajors <- str_replace(differentMajors , "公行系|不動系" , "公共事務學院")
school <- factor(differentMajors)
school
knitr::opts_chunk$set(echo = F, eval=F)
library(jsonlite); library(lubridate); library(readr); library(stringr);
jsonlite::fromJSON("https://www.dropbox.com/s/es19f62rijrd8i7/studentHeight.json?dl=1") -> studentHeights
studentHeights$`學年度` <- as.integer(studentHeights$`學年度`)
studentHeights$`學年度` <-
factor(studentHeights$`學年度` , ordered = T)
studentHeights$`學年度` <- sort(studentHeights$`學年度`)
studentHeights$`年齡` <- as.integer(studentHeights$`年齡`)
studentHeights$`年齡` <-
factor(studentHeights$`年齡` , ordered = T)
studentHeights$`年齡` <- sort(studentHeights$`年齡`)
studentHeights
studentHeights
studentHeights
knitr::opts_chunk$set(echo = TRUE)
install.packages(purrr)
library(purrr)
install.packages(purrr)
library(purrr)
install.packages("purrr")
example <- list(
name=c("小明","小花","小新","美美"),
height=c(175,166,170,160),
weight=c(77,NA,60,43),
birthday=lubridate::ymd(c("1998-03-11","1999-12-22","1995-08-22","2001-10-10")),
hobby=c("美食 旅遊","旅遊 時尚","3C 美食","音樂 旅遊"),
residence=c("Taipei","New Taipei","Taichung","Kaohsiung"),
allowance=factor(c("0-1000","1001-2000","2000+","1001-2000")),
bloodType=c("A","B","B","O")
)
pick_小新 <- example$name == "小新"
data_selected <-
list(
name=example$name[pick_小新],
weight=example$weight[pick_小新],
height=example$height[pick_小新],
hobby=example$hobby[pick_小新],
residence=example$residence[pick_小新],
allowance=example$allowance[pick_小新],
bloodType=example$bloodType[pick_小新]
)
example <- list(
name=c("小明","小花","小新","美美"),
height=c(175,166,170,160),
weight=c(77,NA,60,43),
birthday=lubridate::ymd(c("1998-03-11","1999-12-22","1995-08-22","2001-10-10")),
hobby=c("美食 旅遊","旅遊 時尚","3C 美食","音樂 旅遊"),
residence=c("Taipei","New Taipei","Taichung","Kaohsiung"),
allowance=factor(c("0-1000","1001-2000","2000+","1001-2000")),
bloodType=c("A","B","B","O")
)
pick_小新 <- example$name == "小新"
data_selected <-
list(
name=example$name[pick_小新],
weight=example$weight[pick_小新],
height=example$height[pick_小新],
hobby=example$hobby[pick_小新],
residence=example$residence[pick_小新],
allowance=example$allowance[pick_小新],
bloodType=example$bloodType[pick_小新]
)
map(example, ~.x[pick_小新]) ->
data_selected
data_selected
jsonlite::fromJSON("https://www.dropbox.com/s/6252gbdnv9owljm/dance.json?dl=1", simplifyDataFrame = F) -> dance
# 第一個dance表演名稱
dance[[1]]$title
# 第二個dance表演名稱
dance[[2]]$title
map(dance, ~.x$title) ->
list_titles
View(list_titles)
# 記載第一個表演的所有場次訊息
dance[[1]]$showInfo
str(dance[[1]]$showInfo)
# 計算第一個表演有幾個場次
length(dance[[1]]$showInfo)
# 計算第二個表演有幾個場次
length(dance[[2]]$showInfo)
map(dance,~length(.x$showInfo)) ->
list_numberOfShows
View(list_numberOfShows)
str(dance[[4]]$showInfo)
map(dance[[4]]$showInfo, ~ .x$time) ->
list_showTimes_dance4
map(dance[[4]]$showInfo, ~ .x$time) ->
list_showTimes_dance4
map(dance[[8]]$showInfo ,  ~ .x$time)
map(dance[[8]]$showInfo ,  ~ .x$location)
View(dance)
jsonlite::fromJSON("https://data.ntpc.gov.tw/od/data/api/67BB3C2B-E7D1-43A7-B872-61B2F082E11B?$format=json", simplifyDataFrame = F) ->
busRoutes
jsonlite::fromJSON("https://data.ntpc.gov.tw/od/data/api/67BB3C2B-E7D1-43A7-B872-61B2F082E11B?$format=json", simplifyDataFrame = F) ->
busRoutes
jsonlite::fromJSON("https://data.ntpc.gov.tw/od/data/api/67BB3C2B-E7D1-43A7-B872-61B2F082E11B?$format=json", simplifyDataFrame = F) ->
busRoutes
jsonlite::fromJSON("https://data.ntpc.gov.tw/od/data/api/67BB3C2B-E7D1-43A7-B872-61B2F082E11B?$format=json", simplifyDataFrame = F) ->
busRoutes
jsonlite::fromJSON("https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-C0032-001?Authorization=rdec-key-123-45678-011121314&format=JSON") ->
weather_next36hours
library(purrr)
View(weather_next36hours)
weather_next36hours$cwbopendata$dataset$location$locationName
weather_next36hours$cwbopendata$dataset$location$weatherElement[[1]]$elementName
map(weather_next36hours$cwbopendata$dataset$location$weatherElement , ~ .x$elementName)
map(weather_next36hours$cwbopendata$dataset$location$weatherElement)
map(weather_next36hours$cwbopendata$dataset$location$weatherElement , ~ .x$time[[1]]$startTime)
map(weather_next36hours$cwbopendata$dataset$location$weatherElement , ~ .x$elementName)
weather_next36hours$cwbopendata$dataset$location$locationName
map(weather_next36hours$cwbopendata$dataset$location$weatherElement , ~ .x$time[[1]]$parameter$parameterValue)
jsonlite::fromJSON("https://data.ntpc.gov.tw/od/data/api/67BB3C2B-E7D1-43A7-B872-61B2F082E11B?$format=json", simplifyDataFrame = F) ->
busRoutes
jsonlite::fromJSON("https://opendata.cwb.gov.tw/fileapi/v1/opendataapi/F-C0032-001?Authorization=rdec-key-123-45678-011121314&format=JSON") ->
weather_next36hours
jsonlite::fromJSON("https://data.ntpc.gov.tw/od/data/api/67BB3C2B-E7D1-43A7-B872-61B2F082E11B?$format=json", simplifyDataFrame = F) ->
busRoutes
knitr::opts_chunk$set(echo = TRUE)
threeHeigths <- c(Gary=178, John=182, Cam=175)
threeHeigths <- c(Gary=178, John=182, Cam=175)
threeHeigths <- c(Gary=178, John=182, Cam=175)
# 先排序由大到小，
sort(threeHeigths, decreasing=T) -> sorted_heights
# 把排好的人名取出
names(sorted_heights) -> sorted_persons
# 接著取出第一個位置的人名
sorted_persons[[1]] -> highestPerson
names(sort(threeHeigths, decreasing = T))[[1]] -> highestPerson
names(sort(threeHeigths, decreasing = T))[[1]] -> highestPerson
library(magrittr)
install.packages("magrittr")
# 由cities創出每個元素對應的北部、東部、中部region factor
cities <- factor(c("台北","花蓮","台東","台中"))
# 由cities創出每個元素對應的北部、東部、中部region factor
cities <- factor(c("台北","花蓮","台東","台中"))
levels(cities)
region <- cities
# 以下為一連串的pipe operation
levels(region) -> currentLevels
str_replace(currentLevels,"台北","北部") -> currentLevels1
library(stringr)
library(stringr)
region <- cities
# 以下為一連串的pipe operation
levels(region) -> currentLevels
str_replace(currentLevels,"台北","北部") -> currentLevels1
str_replace(currentLevels1,"花蓮|台東","東部") -> currentLevels2
str_replace(currentLevels2,"台中","中部") -> regionLevels
regionLevels -> levels(region)
levels(region) %>%
str_replace(.,"台北","北部") %>%
str_replace(.,"花蓮|台東","東部") %>%
str_replace(.,"台中","中部") ->
levels(region)
levels(region) %>%
str_replace(.,"台北","北部") %>%
str_replace(.,"花蓮|台東","東部") %>%
str_replace(.,"台中","中部") ->
levels(region)
jsonlite::fromJSON("https://data.ntpc.gov.tw/api/datasets/34B402A8-53D9-483D-9406-24A682C2D6DC/json/preview", simplifyDataFrame = F) -> busRoutes
View(busRoutes)
map(busRoutes , ~ .x$Id)
map(busRoutes , ~ .x$providerId)
View(busRoutes)
map(busRoutes , ~ .x$providerName)
map(busRoutes , ~ .x$nameZh)
num <- c(2,97,22,15,7)
# 選出大於50的數字
(num > 50) -> pick_big
num[pick_big]
(num > 50) %>%
num[.]
dataList <- list(
num=c(2,97,22,15,7),
chr=c("2","97","22","15","7")
)
library(purrr)
map(dataList, is.numeric) -> results
unlist(results) -> pick_numeric
dataList[pick_numeric] -> num_element
weather_next36hours[["cwbopendata"]][["dataset"]][["location"]][["locationName"]]
dataList[[pick_numeric] -> num_element
dataList[[pick_numeric]] -> num_element
library(purrr)
map(dataList, is.numeric) -> results
unlist(results) -> pick_numeric
dataList[pick_numeric] -> num_element
(num_element[[1]] > 50) -> pick_big
num_element[[1]][pick_big] -> bigNumber
jsonlite::fromJSON("https://od.cdc.gov.tw/eic/Day_Confirmation_Age_County_Gender_19CoV.json") -> covid19
jsonlite::fromJSON(
"https://www.dropbox.com/s/jckqryeh5zeat5w/regionPopulation.json?dl=1"
) -> population
unlist(population) -> population
covid19$縣市 <- factor(covid19$縣市)
levels(covid19$縣市) -> levelsInData
population[levelsInData] -> population
population <- sort(population, decreasing=T)
population
newLevels <- names(population)
newLevels
covid19$縣市 <-
factor(
covid19$縣市, levels=newLevels
)
levels(covid19$縣市)
